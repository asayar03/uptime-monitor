name: Run PHP-CS-Fixer

on: [ push, pull_request ]

jobs:
    php-cs-fixer:
        runs-on: ubuntu-latest

        steps:
            -   uses: actions/checkout@v4

            -   name: Set up PHP
                uses: shivammathur/setup-php@v2
                with:
                    php-version: '8.4'
                    extensions: mbstring, intl, pdo, xml
                    coverage: none

            -   name: Create empty .env file
                run: touch .env

            -   name: Install dependencies
                run: composer install --prefer-dist --no-progress --no-interaction --no-scripts

            -   name: Run PHP-CS-Fixer
                run: vendor/bin/php-cs-fixer fix --diff --dry-run
